# 📊 ZULGAP AI 봇 시스템 데이터베이스 설계 보고서

## 📋 데이터베이스 구조 개요

본 프로젝트는 AI 봇과 문서 관리 시스템을 위한 **모듈형 데이터베이스 구조**를 채택하여, 각 기능별로 독립적인 데이터베이스를 구축하되 중앙 매핑 시스템으로 연결하는 방식을 구현했습니다.

---

## 🗂️ 데이터베이스 파일 목록 및 역할

| 파일명 | 데이터베이스명 | 주요 기능 | 핵심 테이블 | 저장 데이터 |
|--------|---------------|-----------|------------|------------|
| **users_schema.sql** | users.db | 사용자 관리 | • users<br>• user_settings | • 회원가입/로그인 정보<br>• 사용자 프로필<br>• UI 테마, 언어 설정 |
| **bots_schema.sql** | bots.db | 봇 관리 | • bots<br>• bot_settings<br>• chat_history | • 봇 기본 정보 (이름, 역할, 아바타)<br>• AI 모델 설정 (GPT-4o-mini)<br>• 사용자와 봇 간 채팅 기록 |
| **documents_schema.sql** | documents.db | 문서 관리 | • documents<br>• document_tags<br>• document_keywords | • 업로드된 파일 정보<br>• AI 분석 결과 및 요약<br>• 검색용 태그 및 키워드 |
| **mappings_schema.sql** | mappings.db | 관계 관리 | • bot_document_mappings<br>• workflow_bot_mappings<br>• user_bot_permissions | • **봇↔문서 연결 관계**<br>• 워크플로우↔봇 연결<br>• 사용자 권한 관리 |
| **workflows_schema.sql** | workflows.db | 워크플로우 | • workflows<br>• workflow_executions | • 드래그앤드롭 워크플로우 정의<br>• 실행 기록 및 결과 |
| **clients_schema.sql** | clients.db | 동료사 관리 | • clients<br>• projects<br>• contracts | • 클라이언트 회사 정보<br>• 프로젝트 관리<br>• 계약 및 예산 관리 |

---

## 🎯 핵심 설계 원칙

### 1. **모듈형 분리 설계**
- 각 기능별 독립적인 데이터베이스 파일
- 유지보수 및 확장성 향상
- 개별 최적화 가능

### 2. **중앙 매핑 시스템**
- `mappings.db`가 모든 관계를 통합 관리
- **봇-문서 매핑이 핵심 기능**
- 데이터 무결성 보장

### 3. **UUID 기반 ID 체계**
- 전체 시스템에서 고유성 보장
- 분산 환경 확장 준비
- 보안성 향상 (예측 불가능)

---

## 🔗 데이터 연결 구조

```
┌─────────────┐    ┌─────────────────┐    ┌─────────────┐
│   users.db  │    │   mappings.db   │    │   bots.db   │
│             │◄──►│                 │◄──►│             │
│ • 사용자정보  │    │ • 봇↔문서 매핑   │    │ • 봇 설정    │
│ • 권한관리    │    │ • 워크플로우매핑 │    │ • 채팅기록   │
└─────────────┘    │ • 권한 관리       │    └─────────────┘
                   │                 │
                   │                 │
┌─────────────┐    │                 │    ┌─────────────┐
│documents.db │    │                 │    │workflows.db │
│             │◄──►│                 │◄──►│             │
│ • 파일저장   │    │                 │    │ • 플로우정의 │
│ • AI분석    │    └─────────────────┘    │ • 실행기록   │
│ • 태그관리   │                          └─────────────┘
└─────────────┘           │
                         ▼
                   ┌─────────────┐
                   │ clients.db  │
                   │             │
                   │ • 클라이언트 │
                   │ • 프로젝트   │
                   │ • 계약관리   │
                   └─────────────┘
```

---

## 📈 구현 현황 및 계획

### ✅ 완료된 작업
- [x] 전체 데이터베이스 스키마 설계 완료
- [x] 6개 독립 데이터베이스 파일 생성
- [x] 봇-문서 매핑 시스템 설계
- [x] UUID 기반 ID 체계 적용
- [x] 인덱스 최적화 완료

### 🔄 진행 예정 작업
- [ ] Node.js 백엔드 API 구현
- [ ] SQLite 데이터베이스 연결
- [ ] 프론트엔드-백엔드 통합
- [ ] 봇 생성/매핑 기능 구현

---

## 💡 기술적 특징

| 특징 | 설명 | 장점 |
|------|------|------|
| **분산 데이터베이스** | 기능별 독립 SQLite 파일 | 성능 최적화, 유지보수 용이 |
| **중앙 매핑 관리** | mappings.db로 모든 관계 관리 | 데이터 무결성, 확장성 |
| **UUID 식별자** | 텍스트 기반 고유 ID | 분산 시스템 준비, 보안 강화 |
| **AI 통합 준비** | GPT-4o-mini 모델 지원 | 최신 AI 기술 활용 가능 |

---

*📅 작성일: 2025년 8월 14일*  
*👤 작성자: ZULGAP AI 인턴 프로젝트팀*  
*🎯 목표: AI 봇과 문서 관리 시스템 구축*
