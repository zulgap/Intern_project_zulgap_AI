-- 📊 데이터베이스 구조 설계 문서
-- 각 기능별로 데이터베이스를 분리하되, 서로 연결되는 부분은 공통 ID로 관리

-- =================================================================
-- 🗂️ 데이터베이스 파일 목록
-- =================================================================

-- 1. 사용자 관리: users.db
--    - 회원가입/로그인 정보
--    - 사용자 프로필
--    - 권한 관리

-- 2. 봇 관리: bots.db  
--    - 봇 기본 정보
--    - 봇 설정 (AI 모델, 프롬프트 등)
--    - 채팅 기록

-- 3. 문서 관리: documents.db
--    - 업로드된 모든 문서
--    - 문서 메타데이터
--    - 문서 내용 분석 결과

-- 4. 매핑 관리: mappings.db
--    - 봇↔문서 매핑 관계
--    - 워크플로우↔봇 매핑 관계  
--    - 사용자↔봇 권한 매핑

-- 5. 워크플로우 관리: workflows.db
--    - 워크플로우 정의
--    - 실행 기록
--    - 노드 구성 정보

-- 6. 동료사 관리: clients.db
--    - 클라이언트 정보
--    - 프로젝트 관리
--    - 계약 정보

-- =================================================================
-- 🔗 공통 연결 키 (Cross-Database References)
-- =================================================================

-- 모든 데이터베이스에서 공통으로 사용할 ID 체계:
-- - user_id: 사용자 고유 번호 (UUID 방식 사용)
-- - bot_id: 봇 고유 번호 (UUID 방식 사용)
-- - document_id: 문서 고유 번호 (UUID 방식 사용)  
-- - workflow_id: 워크플로우 고유 번호 (UUID 방식 사용)
-- - client_id: 클라이언트 고유 번호 (UUID 방식 사용)

-- UUID 사용 이유: 
-- 1. 서로 다른 데이터베이스 파일에서도 고유성 보장
-- 2. 향후 분산 시스템으로 확장시에도 충돌 없음
-- 3. 보안성 향상 (순차적 번호보다 예측하기 어려움)
